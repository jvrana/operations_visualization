{"name":"E Coli Transformation","category":"Cloning","deployed":false,"on_the_fly":false,"field_types":[{"role":"input","name":"Comp Cells","sample_types":["E coli strain"],"object_types":["E. coli Comp Cell Batch"],"part":true,"array":false},{"role":"input","name":"Plasmid","sample_types":["Plasmid","Plasmid"],"object_types":["Gibson Reaction Result","Plasmid Stock"],"part":false,"array":false},{"role":"output","name":"Transformed E Coli","sample_types":["Plasmid"],"object_types":["Transformed E. coli Aliquot"],"part":false,"array":false}],"protocol":"# Author: Ayesha Saleem\n# November 5, 2016\n\nclass Protocol\n  def main\n\n    # Take Gibson result or plasmid and E coli comp cells and create output Transformed E Coli aliquots\n        operations.retrieve.make\n        \n    # Prepare electroporator \n        show do\n            title \"Prepare bench\"\n            note \"If the electroporator is off (no numbers displayed), turn it on using the ON/STDBY button.\"\n            note \"Set the voltage to 1250V by clicking up and down button.\"\n            note \" Click the time constant button to show 0.0.\"\n            image \"initialize_electroporator\"\n            ids = \n            check \"Retrieve and label #{operations.length} 1.5 mL tubes with the following ids: #{operations.collect { |op| \"#{op.output(\"Transformed E Coli\").item}\"}.join(\",\")} \"\n            check \"Set your 3 pipettors to be 2 µL, 42 µL, and 300 µL.\"\n            check \"Prepare 10 µL, 100 µL, and 1000 µL pipette tips.\"      \n            check \"Grab a Bench LB liquid aliquot (sterile) and loosen the cap.\"\n        end\n        \n    comp_cells = Hash.new(0)\n    amp = 0\n    kan = 0\n    \n    # Detract comp cells from batches, store how many of each type of comp cell there are, and figure out how many Amp vs Kan plates will be needed \n        operations.each do |op|\n            batch_id = op.input_array(\"Comp Cells\").item_ids[0]\n            batch = Collection.find_by_id(batch_id)\n            show do\n                note \"#{batch}\"\n            end\n            n = batch.num_samples\n            r = (n / 10) + 1\n            c = n % 10\n            \n            if c == 0 \n                c = 9\n                r = r - 1\n            end\n            \n            batch.set r, c, nil\n            \n            sample = op.input_array(\"Comp Cells\").samples[0].name\n            comp_cells[sample] = comp_cells[sample] + 1 \n            \n            op.input(\"Plasmid\").sample.properties[\"Bacterial Marker\"].capitalize == \"Amp\" ? amp = amp + 1 : kan = kan + 1\n        end\n        \n    # Get comp cells and cuvettes \n        show do \n            title \"Get cold items\"\n            note \"Retrieve a styrofoam ice block and an aluminum tube rack. Put the aluminum tube rack on top of the ice block.\"\n            image \"arrange_cold_block\"\n            check \"Retrieve #{operations.length} cuvettes and put inside the styrofoam touching ice block.\"\n            note \"Retrieve the following electrocompetent aliquots from the M80 and place them on an aluminum tube rack: \"\n            comp_cells.each { |key, val| check \"#{val} #{key} \" }\n            image \"handle_electrocompetent_cells\"\n        end\n        \n    # Label comp cells \n        show do \n            title \"Label aliquots\"\n            check \"Label each electrocompetent aliquot with 1-#{operations.length}.\"\n            note \"If still frozen, wait till the cells have thawed to a slushy consistency.\"\n            warning \"Transformation efficiency depends on keeping electrocompetent cells ice-cold until electroporation.\"\n            warning \"Do not wait too long\"\n            image \"thawed_electrocompotent_cells\"\n        end\n        \n    index = 0\n    \n    # Display table to tech\n        show do\n            title \"Add plasmid to electrocompetent aliquot, electroporate and rescue \"\n            note \"Repeat for each row in the table:\"\n            check \"Pipette 2 uL plasmid/gibson result into labeled electrocompetent aliquot, swirl the tip to mix and place back on the aluminum rack after mixing.\"\n            check \"Transfer 42 uL of e-comp cells to electrocuvette with P100\"\n            check \"Slide into electroporator, press PULSE button twice, and QUICKLY add 300 uL of LB\"\n            check \"pipette cells up and down 3 times, then transfer 300 uL to appropriate 1.5 mL tube with P1000\"\n            table operations.start_table \n                .input_item(\"Plasmid\")\n                .custom_column(heading: \"Electrocompetent Aliquot\") { index = index + 1 }\n                .output_item(\"Transformed E Coli\")\n                .end_table\n        end\n        \n    # Incubate tubes\n        show do \n            title \"Incubate tubes\"\n            check \"Put the transformed E. coli aliquots into 37 C incubator using the small green tube holder.\"\n            note \"Retrieve all the tubes 30 minutes later by doing the following plate_ecoli_transformation protocol. You can finish this protocol now by perfoming the next return steps.\"\n            note \"Place #{amp} Amp plates and #{kan} Kan plates into the incubator\"\n            image \"put_green_tube_holder_to_incubator\"\n        end\n        \n    # Clean up\n        show do\n            title \"Clean up\"\n            check \"Put all cuvettes into washing station.\"\n            check \"Discard empty electrocompetent aliquot tubes into waste bin.\"\n            check \"Return the styrofoam ice block and the aluminum tube rack.\"\n            image \"dump_dirty_cuvettes\"\n        end\n        \n    return {}\n  end\nend ","cost_model":"def cost(op)\n  { labor: 0, materials: 0 }\nend","documentation":"New Operation Type\n===\n\nDocumentation here"}